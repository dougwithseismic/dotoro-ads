---
/**
 * Footer Navigation Component
 *
 * The main site footer with newsletter signup, navigation links, social links, and legal info.
 * Dotoro - Open-source programmatic ad campaign builder.
 *
 * @example
 * ```astro
 * <Footer />
 * ```
 */
import { DEFAULT_LOCALE, type Locale, getLocalizedPath } from '@/i18n';

export interface FooterLink {
  label: string;
  href: string;
  external?: boolean;
}

export interface FooterSection {
  title: string;
  links: FooterLink[];
}

export interface Props {
  /** Language/locale for translations */
  lang?: Locale;
  /** Additional CSS classes */
  class?: string;
}

const {
  lang = DEFAULT_LOCALE,
  class: className = '',
} = Astro.props;

// Footer navigation sections - Dotoro marketing site
const footerSections: FooterSection[] = [
  {
    title: 'Product',
    links: [
      { label: 'Features', href: getLocalizedPath('/#features', lang) },
      { label: 'Pricing', href: getLocalizedPath('/#pricing', lang) },
      { label: 'How it works', href: getLocalizedPath('/#how-it-works', lang) },
      { label: 'Integrations', href: getLocalizedPath('/#integrations', lang) },
    ],
  },
  {
    title: 'Resources',
    links: [
      { label: 'Documentation', href: getLocalizedPath('/docs/', lang) },
      { label: 'Blog', href: getLocalizedPath('/blog', lang) },
      { label: 'GitHub', href: 'https://github.com/withseismic/dotoro', external: true },
    ],
  },
  {
    title: 'Legal',
    links: [
      { label: 'Privacy Policy', href: getLocalizedPath('/privacy-policy', lang) },
      { label: 'Terms of Service', href: getLocalizedPath('/terms-and-conditions', lang) },
    ],
  },
];

// Social media links
const socialLinks = [
  {
    label: 'GitHub',
    href: 'https://github.com/withseismic/dotoro',
    icon: 'github',
  },
  {
    label: 'X (Twitter)',
    href: 'https://twitter.com/withseismic',
    icon: 'twitter',
  },
];
---

<footer class:list={['footer', className]}>
  <div class="footer-container">
    <!-- Top Section: Newsletter + Link Columns -->
    <div class="footer-top">
      <!-- Newsletter Signup -->
      <div class="footer-newsletter">
        <div class="footer-newsletter-content">
          <h3 class="footer-newsletter-title">Join Our Newsletter</h3>
          <p class="footer-newsletter-description">
            Get updates on new features, platform integrations, and programmatic advertising tips from Dotoro.
          </p>
        </div>
        <form class="footer-newsletter-form" action="/api/newsletter" method="POST" novalidate>
          <input
            type="email"
            name="email"
            id="newsletter-email"
            placeholder="Your Email"
            required
            class="footer-newsletter-input"
            aria-label="Email address"
          />
          <button type="submit" class="footer-newsletter-button">
            Submit
          </button>
        </form>
      </div>

      <!-- Navigation Links -->
      <div class="footer-nav">
        {footerSections.map((section) => (
          <div class="footer-nav-section">
            <h4 class="footer-nav-title">{section.title}</h4>
            <ul class="footer-nav-list">
              {section.links.map((link) => (
                <li>
                  <a
                    href={link.href}
                    class="footer-nav-link"
                    {...link.external && { target: '_blank', rel: 'noopener noreferrer' }}
                  >
                    {link.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>

    <!-- Middle Section: Logo + Social Links -->
    <div class="footer-middle">
      <a href={getLocalizedPath('/', lang)} class="footer-logo" aria-label="Home">
        <!-- Dotoro Logo -->
        <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="footerLogo1" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#EB6DF7" />
              <stop offset="100%" stop-color="#B46DF7" />
            </linearGradient>
            <linearGradient id="footerLogo2" x1="0%" y1="100%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#4DD4AC" />
              <stop offset="100%" stop-color="#10B981" />
            </linearGradient>
            <linearGradient id="footerLogo3" x1="100%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#60A5FA" />
              <stop offset="100%" stop-color="#3B82F6" />
            </linearGradient>
          </defs>
          <ellipse cx="24" cy="24" rx="18" ry="18" fill="url(#footerLogo1)" opacity="0.3" />
          <path d="M10 30C10 22 16 13 24 13C32 13 38 22 38 30" stroke="url(#footerLogo1)" stroke-width="5" stroke-linecap="round" fill="none" />
          <circle cx="16" cy="21" r="6" fill="url(#footerLogo2)" />
          <circle cx="32" cy="21" r="6" fill="url(#footerLogo3)" />
          <circle cx="24" cy="32" r="5" fill="#F472B6" />
          <circle cx="24" cy="24" r="4" fill="white" />
        </svg>
        <div class="footer-brand">
          <span class="footer-logo-text">Dotoro</span>
          <span class="footer-tagline">Open-source programmatic ad campaign builder</span>
        </div>
      </a>

      <div class="footer-social">
        {socialLinks.map((social) => (
          <a
            href={social.href}
            class="footer-social-link"
            target="_blank"
            rel="noopener noreferrer"
            aria-label={social.label}
          >
            {social.icon === 'github' && (
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
              </svg>
            )}
            {social.icon === 'twitter' && (
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
              </svg>
            )}
          </a>
        ))}
      </div>
    </div>

    <!-- Bottom Section: Divider + Copyright -->
    <div class="footer-bottom">
      <div class="footer-divider" aria-hidden="true"></div>
      <div class="footer-copyright">
        <div class="footer-copyright-left">
          <p>
            <span class="footer-copyright-symbol">&copy;</span> {new Date().getFullYear()} <a href={getLocalizedPath('/', lang)} class="footer-copyright-link">Dotoro</a> - Open Source
          </p>
        </div>
        <p class="footer-copyright-right">
          Built by <a href="https://github.com/withseismic" target="_blank" rel="noopener noreferrer" class="footer-copyright-link">withSeismic</a>
        </p>
      </div>
    </div>
  </div>
</footer>

<style>
  /* ==========================================================================
     FOOTER BASE STYLES - Figma Design Match
     ========================================================================== */
  .footer {
    background-color: #FFFFFF;
    padding: 200px 80px 32px;
  }

  .footer-container {
    max-width: 1280px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 60px;
  }

  /* ==========================================================================
     TOP SECTION - Newsletter + Navigation
     ========================================================================== */
  .footer-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  /* Newsletter */
  .footer-newsletter {
    max-width: 328px;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .footer-newsletter-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .footer-newsletter-title {
    font-family: var(--font-heading);
    font-weight: var(--font-weight-medium);
    font-size: 24px;
    line-height: 1.3;
    letter-spacing: -0.24px;
    color: #05011C;
    margin: 0;
  }

  .footer-newsletter-description {
    font-family: var(--font-body);
    font-weight: var(--font-weight-regular);
    font-size: 16px;
    line-height: 1.6;
    color: #636977;
    margin: 0;
  }

  .footer-newsletter-form {
    display: flex;
    align-items: center;
    padding: 4px 4px 4px 16px;
    background: #FFFFFF;
    border: 1px solid #E3EAF1;
    border-radius: var(--radius-xl);
  }

  .footer-newsletter-input {
    flex: 1;
    width: 180px;
    padding: 8px 0;
    font-family: var(--font-body);
    font-size: 14px;
    line-height: 1.6;
    color: #05011C;
    background: transparent;
    border: none;
    outline: none;
  }

  .footer-newsletter-input::placeholder {
    color: #636977;
  }

  .footer-newsletter-button {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 40px;
    padding: 12px 24px;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.16) 0%, rgba(255, 255, 255, 0) 100%),
                linear-gradient(90deg, #EA580C 0%, #EA580C 100%);
    border: 1.5px solid rgba(255, 255, 255, 0.12);
    border-radius: var(--radius-3xl);
    box-shadow: 0px 9px 12px 0px rgba(14, 18, 27, 0.02);
    font-family: var(--font-heading);
    font-weight: var(--font-weight-medium);
    font-size: 14px;
    letter-spacing: -0.14px;
    color: white;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .footer-newsletter-button:hover {
    transform: translateY(-1px);
    box-shadow: 0px 12px 20px 0px rgba(234, 88, 12, 0.25);
  }

  /* Navigation Links */
  .footer-nav {
    display: flex;
    gap: 60px;
  }

  .footer-nav-section {
    display: flex;
    flex-direction: column;
    gap: 16px;
    min-width: 132px;
  }

  .footer-nav-section:nth-child(2) {
    min-width: 160px;
  }

  .footer-nav-title {
    font-family: var(--font-heading);
    font-weight: var(--font-weight-medium);
    font-size: 20px;
    line-height: 1.3;
    letter-spacing: -0.2px;
    color: #05011C;
    margin: 0;
  }

  .footer-nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  .footer-nav-link {
    font-family: var(--font-body);
    font-weight: var(--font-weight-regular);
    font-size: 16px;
    line-height: 1.6;
    color: #636977;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .footer-nav-link:hover {
    color: #05011C;
  }

  /* ==========================================================================
     MIDDLE SECTION - Logo + Social
     ========================================================================== */
  .footer-middle {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .footer-logo {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
  }

  .footer-brand {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .footer-logo-text {
    font-family: 'Satoshi Variable', var(--font-heading);
    font-weight: var(--font-weight-medium);
    font-size: 32px;
    line-height: 1;
    letter-spacing: -1.28px;
    color: #0E121B;
  }

  .footer-tagline {
    font-family: var(--font-body);
    font-size: 14px;
    line-height: 1.4;
    color: #636977;
  }

  .footer-social {
    display: flex;
    gap: 6px;
  }

  .footer-social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: #FFFFFF;
    border: 1px solid #E3EAF1;
    border-radius: var(--radius-full);
    color: #636977;
    transition: color 0.2s ease, border-color 0.2s ease;
  }

  .footer-social-link:hover {
    color: #EA580C;
    border-color: #EA580C;
  }

  /* ==========================================================================
     BOTTOM SECTION - Divider + Copyright
     ========================================================================== */
  .footer-bottom {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .footer-divider {
    height: 1px;
    background: #E3EAF1;
  }

  .footer-copyright {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: var(--font-body);
    font-weight: var(--font-weight-regular);
    font-size: 16px;
    line-height: 1.6;
    color: #636977;
  }

  .footer-copyright p {
    margin: 0;
  }

  .footer-copyright-left {
    display: flex;
    gap: 24px;
    align-items: center;
  }

  .footer-copyright-symbol {
    font-weight: var(--font-weight-semibold);
  }

  .footer-copyright-link {
    font-weight: var(--font-weight-medium);
    color: #100E0E;
    text-decoration: underline;
  }

  .footer-copyright-link:hover {
    color: #EA580C;
  }

  /* ==========================================================================
     RESPONSIVE STYLES
     ========================================================================== */
  @media (max-width: 1200px) {
    .footer {
      padding: 120px 40px 32px;
    }

    .footer-nav {
      gap: 40px;
    }
  }

  @media (max-width: 1024px) {
    .footer-top {
      flex-direction: column;
      gap: 48px;
    }

    .footer-newsletter {
      max-width: none;
    }

    .footer-nav {
      flex-wrap: wrap;
      gap: 32px 40px;
    }
  }

  @media (max-width: 768px) {
    .footer {
      padding: 80px 24px 24px;
    }

    .footer-container {
      gap: 40px;
    }

    .footer-nav {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 32px;
    }

    .footer-nav-section {
      min-width: auto !important;
    }

    .footer-middle {
      flex-direction: column;
      gap: 24px;
      align-items: flex-start;
    }

    .footer-copyright {
      flex-direction: column;
      gap: 16px;
      align-items: flex-start;
    }

    .footer-copyright-left {
      flex-direction: column;
      gap: 8px;
      align-items: flex-start;
    }
  }

  @media (max-width: 480px) {
    .footer {
      padding: 60px 16px 20px;
    }

    .footer-newsletter-title {
      font-size: 20px;
    }

    .footer-newsletter-form {
      flex-direction: column;
      padding: 12px;
      gap: 12px;
    }

    .footer-newsletter-input {
      width: 100%;
    }

    .footer-newsletter-button {
      width: 100%;
    }

    .footer-nav {
      grid-template-columns: 1fr;
    }

    .footer-logo-text {
      font-size: 24px;
    }
  }
</style>
